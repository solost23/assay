import{b as e}from"./user.250f5db6.js";import{d as s,r as a,n as l,w as r,h as o,E as d,o as u,f as t,k as w,H as n,i as m,G as i}from"./index.1248482e.js";const p=w("保存"),f=w("关闭"),v=s({name:"RestPwd"}),P=s({...v,setup(s,{expose:w}){const{proxy:v}=i(),P=a(),c=a({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),g=a({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(e,s,a)=>{v.user.newPassword!==s?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]}),b=()=>{var s;null==(s=P.value)||s.validate((s=>{s&&e(c.value.oldPassword,c.value.newPassword).then((e=>{200===e.code&&(v.$modal.msgSuccess("修改成功"),v.resetForm(P))}))}))},h=()=>{n().delView(v.$route),v.$router.push({path:"/index"})};return w({formReset:()=>{var e;null==(e=P.value)||e.resetFields()}}),(e,s)=>{const a=m("el-input"),w=m("el-form-item"),n=m("el-button");return u(),l(o(d),{ref_key:"formRef",ref:P,model:c.value,rules:g.value,"label-width":"80px"},{default:r((()=>[t(w,{label:"旧密码",prop:"oldPassword"},{default:r((()=>[t(a,{modelValue:c.value.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value.oldPassword=e),placeholder:"请输入旧密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),t(w,{label:"新密码",prop:"newPassword"},{default:r((()=>[t(a,{modelValue:c.value.newPassword,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value.newPassword=e),placeholder:"请输入新密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),t(w,{label:"确认密码",prop:"confirmPassword"},{default:r((()=>[t(a,{modelValue:c.value.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value.confirmPassword=e),placeholder:"请确认密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),t(w,null,{default:r((()=>[t(n,{type:"primary",size:"small",onClick:b},{default:r((()=>[p])),_:1}),t(n,{type:"danger",size:"small",onClick:h},{default:r((()=>[f])),_:1})])),_:1})])),_:1},8,["model","rules"])}}});export{P as default};
