import{I as e,r as a,z as l,G as t,d as o,i as s,M as n,o as d,c as u,N as r,O as i,h as p,f as m,w as c,j as g,F as h,A as f,n as y,V as b,q as v,e as w,t as _,k}from"./index.1248482e.js";var C=()=>{const{proxy:o}=t(),s=a(!0),n=a(),d=a(!0),u=a(!0),r=a(!0),i=a(0),p=a(),m=a(""),c=a(!1),g=a(),h=a({pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0}),f=a(),y=a(),b=a(),v=a(),w=a(),_=a({postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}),k=async()=>{s.value=!0,await(async a=>await e({url:"/system/post/list",method:"get",params:a}))(o.addDateRange(h.value,f.value)).then((e=>{p.value=e.rows,i.value=parseInt(e.total),s.value=!1}))},C=()=>{var e;null==(e=w.value)||e.clearSelection()},V=()=>{y.value={postId:void 0,postCode:void 0,postName:void 0,postSort:0,status:"0",remark:void 0},o.resetForm(b)},S=()=>{h.value.pageNum=1,k()};return l((()=>{k(),o.getDicts("sys_normal_disable").then((e=>{g.value=e.data}))})),{loading:s,single:d,multiple:u,showSearch:r,total:i,postList:p,title:m,open:c,queryParams:h,queryFormRef:v,form:y,dateRange:f,formRef:b,rules:_,pageTableRef:w,statusOptions:g,getList:k,statusFormat:e=>o.selectDictLabel(g.value,e.status),cancel:()=>{V(),C(),c.value=!1},handleQuery:S,resetQuery:()=>{f.value=[],o.resetForm(v),S()},handleSelectionChange:e=>{n.value=e.map((e=>e.postId)),d.value=1!=e.length,u.value=!e.length},handleAdd:()=>{V(),m.value="添加岗位",c.value=!0},handleUpdate:async a=>{V();const l=a.postId||n.value;await(async a=>await e({url:"/system/post/"+a,method:"get"}))(l).then((e=>{e.data.postSort=parseInt(e.data.postSort),y.value=e.data,m.value="修改岗位",o.setTableRowSelected(w,a,!0),c.value=!0}))},submitForm:async()=>{var a;await(null==(a=b.value)?void 0:a.validate((a=>{a&&(void 0!==y.value.postId?(async a=>await e({url:"/system/post",method:"put",data:a}))(y.value).then((e=>{200===e.code&&o.$modal.msgSuccess("修改成功")})).finally((()=>{c.value=!1,k()})):(async a=>await e({url:"/system/post",method:"post",data:a}))(y.value).then((e=>{200===e.code&&o.$modal.msgSuccess("新增成功")})).finally((()=>{c.value=!1,k()})))})))},handleDelete:async a=>{const l=a.postId||n.value;o.setTableRowSelected(w,a,!0),await o.$modal.confirm('是否确认删除岗位编号为"'+l+'"的数据项?',"警告").then((()=>(async a=>await e({url:"/system/post/"+a,method:"delete"}))(l))).then((e=>{200===e.code&&(o.$modal.msgSuccess("删除成功"),k())})).catch((()=>{C()}))},handleExport:async()=>{await o.download("/system/post/exportByStream",{...h},`岗位信息${(new Date).getTime()}.xlsx`)},cleanSelect:C}};const V={class:"app-container"},S=k("新增"),x=k("导出"),R=k("修改"),N=k("删除"),U=w("span",{class:"table_link_text"},"修改",-1),z=w("span",{class:"table_link_text"},"删除",-1),T={class:"dialog-footer"},D=k("确 定"),F=k("取 消"),q=o({name:"Post"}),I=o({...q,setup(e){const{loading:a,single:l,multiple:t,showSearch:o,total:q,postList:I,title:Y,open:L,queryParams:Q,queryFormRef:M,form:P,dateRange:$,formRef:K,rules:A,statusOptions:O,getList:j,statusFormat:E,cancel:B,handleQuery:G,resetQuery:H,handleSelectionChange:J,handleAdd:W,handleUpdate:X,submitForm:Z,handleDelete:ee,handleExport:ae,pageTableRef:le,cleanSelect:te}=C();return(e,C)=>{const oe=s("el-input"),se=s("el-form-item"),ne=s("el-option"),de=s("el-select"),ue=s("el-date-picker"),re=s("form-search"),ie=s("el-form"),pe=s("el-button"),me=s("el-col"),ce=s("right-toolbar"),ge=s("el-row"),he=s("el-table-column"),fe=s("data-single-tag"),ye=s("el-link"),be=s("el-table"),ve=s("pagination"),we=s("el-input-number"),_e=s("el-radio"),ke=s("el-radio-group"),Ce=s("el-dialog"),Ve=n("hasPermi"),Se=n("loading");return d(),u("div",V,[r(m(ie,{model:p(Q),ref_key:"queryFormRef",ref:M,inline:!0,"label-width":"70px"},{default:c((()=>[m(se,{label:"岗位编码",prop:"postCode"},{default:c((()=>[m(oe,{modelValue:p(Q).postCode,"onUpdate:modelValue":C[0]||(C[0]=e=>p(Q).postCode=e),placeholder:"请输入岗位编码",clearable:"",onKeyup:g(p(G),["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),m(se,{label:"岗位名称",prop:"postName"},{default:c((()=>[m(oe,{modelValue:p(Q).postName,"onUpdate:modelValue":C[1]||(C[1]=e=>p(Q).postName=e),placeholder:"请输入岗位名称",clearable:"",onKeyup:g(p(G),["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),m(se,{label:"状态",prop:"status"},{default:c((()=>[m(de,{modelValue:p(Q).status,"onUpdate:modelValue":C[2]||(C[2]=e=>p(Q).status=e),placeholder:"岗位状态",clearable:"",onChange:p(G)},{default:c((()=>[(d(!0),u(h,null,f(p(O),(e=>(d(),y(ne,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),m(se,{label:"创建时间",style:{"font-weight":"bold"}},{default:c((()=>[m(ue,{modelValue:p($),"onUpdate:modelValue":C[3]||(C[3]=e=>b($)?$.value=e:null),style:{width:"240px"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:p(G)},null,8,["modelValue","onChange"])])),_:1}),m(re,{onReset:p(H),onSearch:p(G)},null,8,["onReset","onSearch"])])),_:1},8,["model"]),[[i,p(o)]]),m(ge,{gutter:10,class:"mb8"},{default:c((()=>[m(me,{span:1.5},{default:c((()=>[r((d(),y(pe,{type:"primary",plain:"",icon:"plus",size:"small",onClick:p(W)},{default:c((()=>[S])),_:1},8,["onClick"])),[[Ve,["system:post:add"]]])])),_:1},8,["span"]),m(me,{span:1.5},{default:c((()=>[r((d(),y(pe,{type:"warning",plain:"",icon:"download",size:"small",onClick:p(ae)},{default:c((()=>[x])),_:1},8,["onClick"])),[[Ve,["system:post:export"]]])])),_:1},8,["span"]),p(l)?v("",!0):(d(),y(me,{key:0,span:1.5},{default:c((()=>[r((d(),y(pe,{type:"success",plain:"",icon:"edit",size:"small",disabled:p(l),onClick:p(X)},{default:c((()=>[R])),_:1},8,["disabled","onClick"])),[[Ve,["system:post:edit"]]])])),_:1},8,["span"])),p(t)?v("",!0):(d(),y(me,{key:1,span:1.5},{default:c((()=>[r((d(),y(pe,{type:"danger",plain:"",icon:"delete",size:"small",disabled:p(t),onClick:p(ee)},{default:c((()=>[N])),_:1},8,["disabled","onClick"])),[[Ve,["system:post:remove"]]])])),_:1},8,["span"])),m(ce,{showSearch:p(o),"onUpdate:showSearch":C[4]||(C[4]=e=>b(o)?o.value=e:null),onQueryTable:p(j)},null,8,["showSearch","onQueryTable"])])),_:1}),r((d(),y(be,{stripe:"",border:"",height:"560px",ref_key:"pageTableRef",ref:le,data:p(I),onSelectionChange:p(J)},{default:c((()=>[m(he,{type:"selection",width:"55",align:"center"}),m(he,{label:"岗位编号",align:"center",prop:"postId",width:"100"}),m(he,{label:"岗位编码",align:"center",prop:"postCode",width:"300"}),m(he,{label:"岗位名称",align:"center",prop:"postName",width:"300"}),m(he,{label:"岗位排序",align:"center",prop:"postSort",width:"200"}),m(he,{label:"状态",align:"center",width:"200",prop:"status",formatter:p(E)},{default:c((e=>[m(fe,{"single-data":e.row.status,"status-options":p(O)},null,8,["single-data","status-options"])])),_:1},8,["formatter"]),m(he,{label:"备注",align:"center",prop:"remark"}),m(he,{label:"创建时间",align:"center",prop:"createTime",width:"300"},{default:c((a=>[w("span",null,_(e.dateTimeSub(a.row.createTime)),1)])),_:1}),m(he,{label:"操作","header-align":"center",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:c((e=>[r((d(),y(ye,{underline:!1,class:"el-link-spacing",size:"small",type:"primary",icon:"edit",onClick:a=>p(X)(e.row)},{default:c((()=>[U])),_:2},1032,["onClick"])),[[Ve,["system:post:edit"]]]),r((d(),y(ye,{underline:!1,class:"el-link-spacing",size:"small",type:"danger",icon:"delete",onClick:a=>p(ee)(e.row)},{default:c((()=>[z])),_:2},1032,["onClick"])),[[Ve,["system:post:remove"]]])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[Se,p(a)]]),r(m(ve,{total:p(q),page:p(Q).pageNum,"onUpdate:page":C[5]||(C[5]=e=>p(Q).pageNum=e),limit:p(Q).pageSize,"onUpdate:limit":C[6]||(C[6]=e=>p(Q).pageSize=e),onPagination:C[7]||(C[7]=e=>p(j)())},null,8,["total","page","limit"]),[[i,p(q)>0]]),m(Ce,{title:p(Y),modelValue:p(L),"onUpdate:modelValue":C[13]||(C[13]=e=>b(L)?L.value=e:null),width:"30%","append-to-body":"",onClose:C[14]||(C[14]=e=>p(te)())},{footer:c((()=>[w("div",T,[m(pe,{type:"primary",onClick:p(Z)},{default:c((()=>[D])),_:1},8,["onClick"]),m(pe,{onClick:p(B)},{default:c((()=>[F])),_:1},8,["onClick"])])])),default:c((()=>[m(ie,{ref_key:"formRef",ref:K,model:p(P),inline:!0,rules:p(A),"label-width":"100px"},{default:c((()=>[m(ge,null,{default:c((()=>[m(me,{span:12},{default:c((()=>[m(se,{label:"岗位名称",prop:"postName"},{default:c((()=>[m(oe,{modelValue:p(P).postName,"onUpdate:modelValue":C[8]||(C[8]=e=>p(P).postName=e),placeholder:"请输入岗位名称",style:{width:"240px"}},null,8,["modelValue"])])),_:1})])),_:1}),m(me,{span:12},{default:c((()=>[m(se,{label:"岗位编码",prop:"postCode"},{default:c((()=>[m(oe,{modelValue:p(P).postCode,"onUpdate:modelValue":C[9]||(C[9]=e=>p(P).postCode=e),placeholder:"请输入编码名称",style:{width:"240px"}},null,8,["modelValue"])])),_:1})])),_:1}),m(me,{span:12},{default:c((()=>[m(se,{label:"岗位顺序",prop:"postSort"},{default:c((()=>[m(we,{modelValue:p(P).postSort,"onUpdate:modelValue":C[10]||(C[10]=e=>p(P).postSort=e),"controls-position":"right",min:0,style:{width:"240px"}},null,8,["modelValue"])])),_:1})])),_:1}),m(me,{span:12},{default:c((()=>[m(se,{label:"岗位状态",prop:"status"},{default:c((()=>[m(ke,{modelValue:p(P).status,"onUpdate:modelValue":C[11]||(C[11]=e=>p(P).status=e)},{default:c((()=>[(d(!0),u(h,null,f(p(O),(e=>(d(),y(_e,{key:e.dictValue,label:e.dictValue},{default:c((()=>[k(_(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(me,{span:24},{default:c((()=>[m(se,{label:"备注",prop:"remark"},{default:c((()=>[m(oe,{modelValue:p(P).remark,"onUpdate:modelValue":C[12]||(C[12]=e=>p(P).remark=e),type:"textarea",placeholder:"请输入备注",autosize:{minRows:4,maxRows:8},style:{width:"606px"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}});export{I as default};
