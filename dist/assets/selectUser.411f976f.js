import{d as e,r as l,B as o,i as a,o as t,n,w as r,e as u,f as i,j as p,h as s,t as d,N as m,O as f,k as c,G as b}from"./index.1248482e.js";import{u as g,d as h}from"./role.b7334f88.js";const v=c("搜索"),w=c("重置"),_={class:"dialog-footer"},y=c("确 定"),N=c("取 消"),k=e({name:"SelectUser"}),S=e({...k,props:{roleId:{type:[Number,String]}},emits:["ok"],setup(e,{expose:c,emit:k}){const S=e,{proxy:V}=b(),{sys_normal_disable:I}=V.useDict("sys_normal_disable"),x=l([]),C=l(!1),U=l(0),R=l([]),T=o({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0});function j(e){V.$refs.refTable.toggleRowSelection(e)}function K(e){R.value=e.map((e=>e.userId))}function z(){g(T).then((e=>{x.value=e.rows,U.value=e.total}))}function $(){T.pageNum=1,z()}function q(){V.resetForm("queryRef"),$()}function B(){const e=T.roleId,l=R.value.join(",");""!=l?h({roleId:e,userIds:l}).then((e=>{V.$modal.msgSuccess(e.msg),200===e.code&&(C.value=!1,k("ok"))})):V.$modal.msgError("请选择要分配的用户")}return c({show:function(){T.roleId=S.roleId,z(),C.value=!0}}),(e,l)=>{const o=a("el-input"),c=a("el-form-item"),b=a("el-button"),g=a("el-form"),h=a("el-table-column"),k=a("dict-tag"),S=a("el-table"),V=a("pagination"),R=a("el-row"),D=a("el-dialog");return t(),n(D,{title:"选择用户",modelValue:C.value,"onUpdate:modelValue":l[5]||(l[5]=e=>C.value=e),width:"800px",top:"5vh","append-to-body":""},{footer:r((()=>[u("div",_,[i(b,{type:"primary",onClick:B},{default:r((()=>[y])),_:1}),i(b,{onClick:l[4]||(l[4]=e=>C.value=!1)},{default:r((()=>[N])),_:1})])])),default:r((()=>[i(g,{model:T,ref:"queryRef",inline:!0},{default:r((()=>[i(c,{label:"用户名称",prop:"userName"},{default:r((()=>[i(o,{modelValue:T.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>T.userName=e),placeholder:"请输入用户名称",clearable:"",onKeyup:p($,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),i(c,{label:"手机号码",prop:"phonenumber"},{default:r((()=>[i(o,{modelValue:T.phonenumber,"onUpdate:modelValue":l[1]||(l[1]=e=>T.phonenumber=e),placeholder:"请输入手机号码",clearable:"",onKeyup:p($,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),i(c,null,{default:r((()=>[i(b,{type:"primary",icon:"Search",onClick:$},{default:r((()=>[v])),_:1}),i(b,{icon:"Refresh",onClick:q},{default:r((()=>[w])),_:1})])),_:1})])),_:1},8,["model"]),i(R,null,{default:r((()=>[i(S,{onRowClick:j,ref:"refTable",data:x.value,onSelectionChange:K,height:"260px"},{default:r((()=>[i(h,{type:"selection",width:"55"}),i(h,{label:"用户名称",prop:"userName","show-overflow-tooltip":!0}),i(h,{label:"用户昵称",prop:"nickName","show-overflow-tooltip":!0}),i(h,{label:"邮箱",prop:"email","show-overflow-tooltip":!0}),i(h,{label:"手机",prop:"phonenumber","show-overflow-tooltip":!0}),i(h,{label:"状态",align:"center",prop:"status"},{default:r((e=>[i(k,{options:s(I),value:e.row.status},null,8,["options","value"])])),_:1}),i(h,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:r((l=>[u("span",null,d(e.parseTime(l.row.createTime)),1)])),_:1})])),_:1},8,["data"]),m(i(V,{total:U.value,page:T.pageNum,"onUpdate:page":l[2]||(l[2]=e=>T.pageNum=e),limit:T.pageSize,"onUpdate:limit":l[3]||(l[3]=e=>T.pageSize=e),onPagination:z},null,8,["total","page","limit"]),[[f,U.value>0]])])),_:1})])),_:1},8,["modelValue"])}}});export{S as default};
