import{_ as e,d as a,r as s,c as l,f as r,w as o,h as u,E as t,g as i,o as d,j as n,n as c,e as p,q as m,s as g,k as f,b as v,i as _,p as y,m as w,v as h,x as V}from"./index.1248482e.js";const b={class:"register"},k=(e=>(y("data-v-6a2e3eaf"),e=e(),w(),e))((()=>p("h3",{class:"title"},"硫酸灌车自动取样管理系统",-1))),x={class:"register-code"},q=["src"],K={key:0},z={key:1},P={style:{float:"right"}},U=f("使用已有账户登录");var C=e(a({__name:"register",setup(e){const a=v(),f=s(),y=s({username:"",password:"",confirmPassword:"",code:"",uuid:""}),w={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(e,a,s)=>{y.value.password!==a?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},C=s(""),E=s(!1),j=s(!0),H=()=>{var e;null==(e=f.value)||e.validate((e=>{e&&(E.value=!0,h(y.value).then((e=>{if(200===e.code){const e=y.value.username;V.alert("<font color='red'>恭喜你，您的账号 "+e+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then((()=>{a.push("/login")})).catch((()=>{}))}})).catch((()=>{E.value=!1,j&&I()})))}))},I=()=>{i().then((e=>{200===e.code&&(j.value=void 0===e.captchaEnabled||e.captchaEnabled,j.value&&(C.value="data:image/gif;base64,"+e.img,y.value.uuid=e.uuid))}))};return I(),(e,a)=>{const s=_("svg-icon"),i=_("el-input"),v=_("el-form-item"),h=_("el-button"),V=_("router-link");return d(),l("div",b,[r(u(t),{ref_key:"registerRef",ref:f,model:y.value,rules:w,class:"register-form"},{default:o((()=>[k,r(v,{prop:"username"},{default:o((()=>[r(i,{modelValue:y.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.username=e),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:o((()=>[r(s,{"icon-class":"user",class:"el-input__icon input-icon"})])),_:1},8,["modelValue"])])),_:1}),r(v,{prop:"password"},{default:o((()=>[r(i,{modelValue:y.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.password=e),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:n(H,["enter"])},{prefix:o((()=>[r(s,{"icon-class":"password",class:"el-input__icon input-icon"})])),_:1},8,["modelValue","onKeyup"])])),_:1}),r(v,{prop:"confirmPassword"},{default:o((()=>[r(i,{modelValue:y.value.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.confirmPassword=e),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:n(H,["enter"])},{prefix:o((()=>[r(s,{"icon-class":"password",class:"el-input__icon input-icon"})])),_:1},8,["modelValue","onKeyup"])])),_:1}),j.value?(d(),c(v,{key:0,prop:"code"},{default:o((()=>[r(i,{size:"large",modelValue:y.value.code,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.code=e),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:n(H,["enter"])},{prefix:o((()=>[r(s,{"icon-class":"validCode",class:"el-input__icon input-icon"})])),_:1},8,["modelValue","onKeyup"]),p("div",x,[p("img",{src:C.value,onClick:I,class:"register-code-img"},null,8,q)])])),_:1})):m("",!0),r(v,{style:{width:"100%"}},{default:o((()=>[r(h,{loading:E.value,size:"large",type:"primary",style:{width:"100%"},onClick:g(H,["prevent"])},{default:o((()=>[E.value?(d(),l("span",z,"注 册 中...")):(d(),l("span",K,"注 册"))])),_:1},8,["loading","onClick"]),p("div",P,[r(V,{class:"link-type",to:"/login"},{default:o((()=>[U])),_:1})])])),_:1})])),_:1},8,["model"])])}}}),[["__scopeId","data-v-6a2e3eaf"]]);export{C as default};
