import{I as e,r as l,z as a,G as t,d as o,i as n,M as i,o as s,c as d,N as u,O as c,h as r,f as p,w as m,j as y,F as g,A as h,n as f,q as v,V as b,e as _,t as w,k as T,ag as V}from"./index.1248482e.js";var k=()=>{const{proxy:o}=t(),n=l(!0),i=l(),s=l(!0),d=l(!0),u=l(!0),c=l(0),r=l(),p=l(""),m=l(!1),y=l(),g=l(),h=l({pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0}),f=l(),v=l(),b=l(),_=l(),w=l({noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}),T=async()=>{n.value=!0,await(async l=>await e({url:"/system/notice/list",method:"get",params:l}))(h.value).then((e=>{r.value=e.rows,c.value=parseInt(e.total),n.value=!1}))},V=()=>{o.cleanTableSelection(_)},k=()=>{f.value={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"0"},o.resetForm(v)},C=()=>{h.value.pageNum=1,T()};return a((()=>{T(),o.getDicts("sys_notice_status").then((e=>{y.value=e.data})),o.getDicts("sys_notice_type").then((e=>{g.value=e.data}))})),{loading:n,single:s,multiple:d,showSearch:u,total:c,noticeList:r,title:p,open:m,statusOptions:y,typeOptions:g,queryParams:h,form:f,formRef:v,queryFormRef:b,rules:w,getList:T,statusFormat:e=>o.selectDictLabel(y.value,e.status),typeFormat:e=>o.selectDictLabel(g.value,e.noticeType),cancel:()=>{var e;m.value=!1,k(),null==(e=_.value)||e.clearSelection()},handleQuery:C,resetQuery:()=>{h.value.noticeType="",o.resetForm(b),C()},handleSelectionChange:e=>{i.value=e.map((e=>e.noticeId)),s.value=1!=e.length,d.value=!e.length},handleAdd:()=>{k(),m.value=!0,p.value="添加公告"},handleUpdate:async l=>{k();const a=l.noticeId||i.value;await(async l=>await e({url:"/system/notice/"+l,method:"get"}))(a).then((e=>{f.value=e.data,p.value="修改公告",o.setTableRowSelected(_,l,!0),m.value=!0}))},submitForm:async()=>{var l;await(null==(l=v.value)?void 0:l.validate((l=>{l&&(null!=f.value.noticeId?(async l=>await e({url:"/system/notice",method:"put",data:l}))(f.value).then((e=>{200===e.code&&(o.$modal.msgSuccess("修改成功"),m.value=!1,T())})):(async l=>await e({url:"/system/notice",method:"post",data:l}))(f.value).then((e=>{200===e.code&&(o.$modal.msgSuccess("新增成功"),m.value=!1,T())})))})))},handleDelete:l=>{const a=l.noticeId||i.value;o.setTableRowSelected(_,l,!0),o.$modal.confirm('是否确认删除公告编号为"'+a+'"的数据项?',"警告").then((()=>(async l=>await e({url:"/system/notice/"+l,method:"delete"}))(a))).then((e=>{200===e.code&&(T(),o.$modal.msgSuccess("删除成功"))})).catch((()=>{V()}))},pageTable:_,cleanSelect:V}};const C={class:"app-container"},S=T("新增"),U=T("修改"),F=T("删除"),x=T("修改"),z=T("删除"),L={class:"dialog-footer",style:{"margin-top":"30px"}},R=T("确 定"),q=T("取 消"),I=o({name:"Notice"}),D=o({...I,setup(e){const{loading:l,single:a,multiple:t,showSearch:o,total:I,noticeList:D,title:N,open:Q,statusOptions:B,typeOptions:O,queryParams:P,form:$,formRef:A,queryFormRef:j,rules:K,getList:G,statusFormat:M,typeFormat:E,cancel:H,handleQuery:J,resetQuery:W,handleSelectionChange:X,handleAdd:Y,handleUpdate:Z,submitForm:ee,handleDelete:le,pageTable:ae,cleanSelect:te}=k();return(e,k)=>{const oe=n("el-input"),ne=n("el-form-item"),ie=n("el-option"),se=n("el-select"),de=n("form-search"),ue=n("el-form"),ce=n("el-button"),re=n("el-col"),pe=n("right-toolbar"),me=n("el-row"),ye=n("el-table-column"),ge=n("DataSingleTag"),he=n("el-link"),fe=n("el-table"),ve=n("pagination"),be=n("el-radio"),_e=n("el-radio-group"),we=n("el-dialog"),Te=i("hasPermi"),Ve=i("loading");return s(),d("div",C,[u(p(ue,{model:r(P),ref_key:"queryFormRef",ref:j,inline:!0,"label-width":"70px"},{default:m((()=>[p(ne,{label:"公告标题",prop:"noticeTitle"},{default:m((()=>[p(oe,{modelValue:r(P).noticeTitle,"onUpdate:modelValue":k[0]||(k[0]=e=>r(P).noticeTitle=e),placeholder:"请输入公告标题",clearable:"",onKeyup:k[1]||(k[1]=y((e=>r(J)()),["enter","native"]))},null,8,["modelValue"])])),_:1}),p(ne,{label:"操作人员",prop:"createBy"},{default:m((()=>[p(oe,{modelValue:r(P).createBy,"onUpdate:modelValue":k[2]||(k[2]=e=>r(P).createBy=e),placeholder:"请输入操作人员",clearable:"",onKeyup:k[3]||(k[3]=y((e=>r(J)()),["enter","native"])),onChange:k[4]||(k[4]=e=>r(J)())},null,8,["modelValue"])])),_:1}),p(ne,{label:"类型",prop:"noticeType"},{default:m((()=>[p(se,{modelValue:r(P).noticeType,"onUpdate:modelValue":k[5]||(k[5]=e=>r(P).noticeType=e),placeholder:"请选择类型",clearable:"",onChange:k[6]||(k[6]=e=>r(J)())},{default:m((()=>[(s(!0),d(g,null,h(r(O),(e=>(s(),f(ie,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(de,{onReset:k[7]||(k[7]=e=>r(W)()),onSearch:k[8]||(k[8]=e=>r(J)())})])),_:1},8,["model"]),[[c,r(o)]]),p(me,{gutter:10,class:"mb8"},{default:m((()=>[p(re,{span:1.5},{default:m((()=>[u((s(),f(ce,{type:"primary",plain:"",icon:"plus",size:"small",onClick:r(Y)},{default:m((()=>[S])),_:1},8,["onClick"])),[[Te,["system:notice:add"]]])])),_:1},8,["span"]),r(a)?v("",!0):(s(),f(re,{key:0,span:1.5},{default:m((()=>[u((s(),f(ce,{type:"success",plain:"",icon:"edit",size:"small",disabled:r(a),onClick:r(Z)},{default:m((()=>[U])),_:1},8,["disabled","onClick"])),[[Te,["system:notice:edit"]]])])),_:1},8,["span"])),r(t)?v("",!0):(s(),f(re,{key:1,span:1.5},{default:m((()=>[u((s(),f(ce,{type:"danger",plain:"",icon:"delete",size:"small",disabled:r(t),onClick:r(le)},{default:m((()=>[F])),_:1},8,["disabled","onClick"])),[[Te,["system:notice:remove"]]])])),_:1},8,["span"])),p(pe,{showSearch:r(o),"onUpdate:showSearch":k[9]||(k[9]=e=>b(o)?o.value=e:null),onQueryTable:r(G)},null,8,["showSearch","onQueryTable"])])),_:1}),u((s(),f(fe,{stripe:"",border:"",ref_key:"pageTable",ref:ae,data:r(D),onSelectionChange:r(X)},{default:m((()=>[p(ye,{type:"selection",width:"55",align:"center"}),p(ye,{label:"序号",align:"center",prop:"noticeId",width:"100"}),p(ye,{label:"通知/公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),p(ye,{label:"公告类型",align:"center",prop:"noticeType",formatter:r(E),width:"300"},null,8,["formatter"]),p(ye,{label:"状态",align:"center",prop:"status",formatter:r(M),width:"300"},{default:m((e=>[p(ge,{"single-data":e.row.status,"status-options":r(B)},null,8,["single-data","status-options"])])),_:1},8,["formatter"]),p(ye,{label:"创建者",align:"center",prop:"createBy",width:"200"}),p(ye,{label:"创建时间",align:"center",prop:"createTime",width:"200"},{default:m((l=>[_("span",null,w(e.parseTime(l.row.createTime,"{y}-{m}-{d}")),1)])),_:1}),p(ye,{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:m((e=>[u((s(),f(he,{class:"el-link-spacing",underline:!1,size:"small",type:"primary",icon:"edit",onClick:l=>r(Z)(e.row)},{default:m((()=>[x])),_:2},1032,["onClick"])),[[Te,["system:notice:edit"]]]),u((s(),f(he,{class:"el-link-spacing",underline:!1,size:"small",type:"danger",icon:"delete",onClick:l=>r(le)(e.row)},{default:m((()=>[z])),_:2},1032,["onClick"])),[[Te,["system:notice:remove"]]])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[Ve,r(l)]]),u(p(ve,{total:r(I),page:r(P).pageNum,"onUpdate:page":k[10]||(k[10]=e=>r(P).pageNum=e),limit:r(P).pageSize,"onUpdate:limit":k[11]||(k[11]=e=>r(P).pageSize=e),onPagination:k[12]||(k[12]=e=>r(G)())},null,8,["total","page","limit"]),[[c,r(I)>0]]),p(we,{title:r(N),modelValue:r(Q),"onUpdate:modelValue":k[18]||(k[18]=e=>b(Q)?Q.value=e:null),width:"780px","append-to-body":"",onClose:k[19]||(k[19]=e=>r(te)())},{footer:m((()=>[_("div",L,[p(ce,{type:"primary",onClick:r(ee)},{default:m((()=>[R])),_:1},8,["onClick"]),p(ce,{onClick:k[17]||(k[17]=e=>r(H)())},{default:m((()=>[q])),_:1})])])),default:m((()=>[p(ue,{ref_key:"formRef",ref:A,model:r($),rules:r(K),"label-width":"80px"},{default:m((()=>[p(me,null,{default:m((()=>[p(re,{span:24},{default:m((()=>[p(ne,{label:"公告标题",prop:"noticeTitle"},{default:m((()=>[p(oe,{modelValue:r($).noticeTitle,"onUpdate:modelValue":k[13]||(k[13]=e=>r($).noticeTitle=e),placeholder:"请输入公告标题"},null,8,["modelValue"])])),_:1})])),_:1}),p(re,{span:12},{default:m((()=>[p(ne,{label:"公告类型",prop:"noticeType"},{default:m((()=>[p(se,{modelValue:r($).noticeType,"onUpdate:modelValue":k[14]||(k[14]=e=>r($).noticeType=e),placeholder:"请选择",style:{width:"100%"}},{default:m((()=>[(s(!0),d(g,null,h(r(O),(e=>(s(),f(ie,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(re,{span:12},{default:m((()=>[p(ne,{label:"状态",style:{float:"right","margin-right":"50px"}},{default:m((()=>[p(_e,{modelValue:r($).status,"onUpdate:modelValue":k[15]||(k[15]=e=>r($).status=e)},{default:m((()=>[(s(!0),d(g,null,h(r(B),(e=>(s(),f(be,{key:e.dictValue,label:e.dictValue},{default:m((()=>[T(w(e.dictLabel),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(re,{span:24},{default:m((()=>[p(ne,{label:"内容"},{default:m((()=>[p(V,{modelValue:r($).noticeContent,"onUpdate:modelValue":k[16]||(k[16]=e=>r($).noticeContent=e),"min-height":180,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}});export{D as default};
